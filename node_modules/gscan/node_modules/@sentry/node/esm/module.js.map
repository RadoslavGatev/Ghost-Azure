{"version":3,"file":"module.js","sources":["../../src/module.ts"],"sourcesContent":["import { basename, dirname } from '@sentry/utils';\n\n/** normalizes Windows paths */\nfunction normalizePath(path: string): string {\n  return path\n    .replace(/^[A-Z]:/, '') // remove Windows-style prefix\n    .replace(/\\\\/g, '/'); // replace all `\\` instances with `/`\n}\n\n/** Gets the module from a filename */\nexport function getModule(filename: string | undefined): string | undefined {\n  if (!filename) {\n    return;\n  }\n\n  const normalizedFilename = normalizePath(filename);\n\n  // We could use optional chaining here but webpack does like that mixed with require\n  const base = normalizePath(\n    `${(require && require.main && require.main.filename && dirname(require.main.filename)) || global.process.cwd()}/`,\n  );\n\n  // It's specifically a module\n  const file = basename(normalizedFilename, '.js');\n\n  const path = dirname(normalizedFilename);\n  let n = path.lastIndexOf('/node_modules/');\n  if (n > -1) {\n    // /node_modules/ is 14 chars\n    return `${path.slice(n + 14).replace(/\\//g, '.')}:${file}`;\n  }\n  // Let's see if it's a part of the main module\n  // To be a part of main module, it has to share the same base\n  n = `${path}/`.lastIndexOf(base, 0);\n\n  if (n === 0) {\n    let moduleName = path.slice(base.length).replace(/\\//g, '.');\n    if (moduleName) {\n      moduleName += ':';\n    }\n    moduleName += file;\n    return moduleName;\n  }\n  return file;\n}\n"],"names":[],"mappings":";;AAEA;AACA,SAAA,aAAA,CAAA,IAAA,EAAA;AACA,EAAA,OAAA,IAAA;AACA,KAAA,OAAA,CAAA,SAAA,EAAA,EAAA,CAAA;AACA,KAAA,OAAA,CAAA,KAAA,EAAA,GAAA,CAAA,CAAA;AACA,CAAA;AACA;AACA;AACA,SAAA,SAAA,CAAA,QAAA,EAAA;AACA,EAAA,IAAA,CAAA,QAAA,EAAA;AACA,IAAA,OAAA;AACA,GAAA;AACA;AACA,EAAA,MAAA,kBAAA,GAAA,aAAA,CAAA,QAAA,CAAA,CAAA;AACA;AACA;AACA,EAAA,MAAA,IAAA,GAAA,aAAA;AACA,IAAA,CAAA,EAAA,CAAA,OAAA,IAAA,OAAA,CAAA,IAAA,IAAA,OAAA,CAAA,IAAA,CAAA,QAAA,IAAA,OAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA,CAAA,KAAA,MAAA,CAAA,OAAA,CAAA,GAAA,EAAA,CAAA,CAAA,CAAA;AACA,GAAA,CAAA;AACA;AACA;AACA,EAAA,MAAA,IAAA,GAAA,QAAA,CAAA,kBAAA,EAAA,KAAA,CAAA,CAAA;AACA;AACA,EAAA,MAAA,IAAA,GAAA,OAAA,CAAA,kBAAA,CAAA,CAAA;AACA,EAAA,IAAA,CAAA,GAAA,IAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,CAAA;AACA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA,EAAA;AACA;AACA,IAAA,OAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,CAAA,GAAA,EAAA,CAAA,CAAA,OAAA,CAAA,KAAA,EAAA,GAAA,CAAA,CAAA,CAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AACA,GAAA;AACA;AACA;AACA,EAAA,CAAA,GAAA,CAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA,WAAA,CAAA,IAAA,EAAA,CAAA,CAAA,CAAA;AACA;AACA,EAAA,IAAA,CAAA,KAAA,CAAA,EAAA;AACA,IAAA,IAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,CAAA,OAAA,CAAA,KAAA,EAAA,GAAA,CAAA,CAAA;AACA,IAAA,IAAA,UAAA,EAAA;AACA,MAAA,UAAA,IAAA,GAAA,CAAA;AACA,KAAA;AACA,IAAA,UAAA,IAAA,IAAA,CAAA;AACA,IAAA,OAAA,UAAA,CAAA;AACA,GAAA;AACA,EAAA,OAAA,IAAA,CAAA;AACA;;;;"}