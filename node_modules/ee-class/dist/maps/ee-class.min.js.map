{"version":3,"sources":["class.js"],"names":["root","factory","define","amd","module","exports","ee","Class","this","setSuper","setSuperPrototype","name","base","proto","parent","args","i","l","___super","arguments","length","push","apply","Error","local","Object","defineProperty","value","prototype","hasOwnProperty","call","___isEeClass","constructor","getPrototypeOf","classDefinition","classConstructor","properties","inherits","___properties","keys","forEach","key","property","enumerable","displayName","toString","some","indexOf","writable","Symbol","iterator","result","init","create","Enumerable","Configurable","Writable","instance","undefined","descriptor","implement","source","target","inspect","obj","description","getOwnPropertyNames","sort"],"mappings":"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","file":"ee-class.min.js","sourcesContent":["(function(root, factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        // AMD\n        \n        define([], factory);\n    } else if (typeof module === 'object' && typeof module.exports === 'object') {\n        // Node\n\n        module.exports = factory();\n    } else {\n        // EE Namespace\n\n        // create namespace as needed\n        if (typeof root.ee !== 'object') root.ee = {};\n\n        // publish\n        root.ee.Class = factory();\n    }\n})(this, function() {\n    'use strict';\n\n\n    var   setSuper\n        , setSuperPrototype\n        , Class;\n\n\n    // set the super method on each method which is used to call the next method of the same name in the prototype chain\n    setSuper = function(name, base, proto, parent) {\n        base.super = function() {\n            var args, i, l;\n\n            if (base.___super) {\n                args = [];\n\n                // convert args into an arry in order\n                for (i = 0, l = arguments.length; i < l; i++) args.push(arguments[i]);\n\n                // call super\n                return base.___super.apply(this, args);\n            }\n            else throw new Error('The method «'+name+'» has no super «'+name+'» method on any protoype!');\n        };\n\n\n        // makes the local class definnition available to the parent scope\n        if (!base.local) Object.defineProperty(base, 'local', {value: parent});\n\n        if (proto && proto.prototype) setSuperPrototype(name, base, proto.prototype, parent);\n    };\n\n\n    // find the next method with the same name on the protoype chain\n    setSuperPrototype = function(name, base, proto, parent) {\n\n        // makes the local class definnition available to the parent scope\n        if (!base.local) Object.defineProperty(base, 'local', {value: parent});\n\n\n        if (proto) {\n            if (Object.hasOwnProperty.call(proto, name)){\n                Object.defineProperty(base, '___super', {value: proto[name]});\n            }\n            else if (!proto.___isEeClass && name === 'init' && typeof proto === 'object' && typeof proto.constructor === 'function') {\n                // a plain js object ... set it as super to the init constructor\n                Object.defineProperty(base, '___super', {value: proto.constructor});\n            }\n            else {\n                setSuperPrototype(name, base, typeof proto === 'object' ? Object.getPrototypeOf(proto) : null, parent);\n            }\n        }\n    };\n\n\n\n    Class = function(classDefinition) {\n        var   properties = {}\n            , classConstructor;\n\n        // not creating a class, creating a property descriptor insted\n        if (!(this instanceof Class)) {\n            return Object.create(Class, {value:{value: classDefinition, enumerable: true}});\n        }\n\n\n        // get properties from super class definition\n        if (classDefinition.inherits && classDefinition.inherits.___properties) properties = classDefinition.inherits.___properties;\n\n        // collect all properties\n        Object.keys(classDefinition).forEach(function(key){\n            var property = classDefinition[key];\n\n            // inherits from another class / prototype\n            if (key === 'inherits') return;\n\n            // map as method\n            else if (typeof property === 'function') {\n                properties[key] = {value: property, enumerable: key[0] !== '_'};\n\n                // this may be used to build more meaningful stack traces\n                if (!properties[key].value.displayName)  Object.defineProperty(properties[key].value, 'displayName', {value: key});\n\n                // check if there is an super method to call on any of the prototypes\n                setSuper(key, property, classDefinition.inherits, classDefinition);\n            }\n\n            // more analytics required\n            else if (typeof property === 'object' && Object.prototype.toString.call(property) === '[object Object]') {\n\n                // property descriptor\n                if (Object.hasOwnProperty.call(property, 'get') || Object.hasOwnProperty.call(property, 'value') || Object.hasOwnProperty.call(property, 'set')) {\n                    if (!Object.keys(property).some(function(key){ return ['get', 'set', 'value', 'enumerable', 'writable', 'configurable'].indexOf(key) === -1;})) {\n                        // there ar eno other keys on the obejct, we should expect a definition herre\n\n                        properties[key] = property;\n\n                        if (typeof property.value === 'function') {\n                            setSuper(key, property.value, classDefinition.inherits, classDefinition);\n\n                            // this may be used to build more meaningful stack traces\n                            if (!property.value.displayName) Object.defineProperty(property.value, 'displayName', {value: key});\n                        }\n                    }\n                    else {\n                        properties[key] = properties[key] = {value: property, enumerable: true, writable: true};\n                    }\n                }\n                else {\n                    properties[key] = properties[key] = {value: property, enumerable: true, writable: true};\n                }\n            }\n\n            // map as scalar property\n            else properties[key] = {value: property, enumerable: true, writable: true};\n        });\n\n\n        // check for es6 features\n        if (typeof Symbol === 'function' && Symbol.iterator in classDefinition) properties[Symbol.iterator] = {value: classDefinition[Symbol.iterator], writable: true};\n\n\n\n\n\n        // constructor function that is returned\n        // to the user\n        classConstructor = function(){\n            var   args = []\n                , result, i, l;\n\n\n            // check if the new keyword was forgotten\n            if (!(this instanceof classConstructor)) throw new Error('the class constructor was called without the «new» keyword!');\n\n            // convert args into an arry in order\n            for (i = 0, l = arguments.length; i < l; i++) args.push(arguments[i]);\n\n\n            // check if the class got a constructor method\n            if (this.init) result = this.init.apply(this, args);\n\n            // or we inherited from a constructor\n            else if (typeof classDefinition.inherits === 'function') classDefinition.inherits.apply(this, args);\n\n\n            // we return anything we got from the constructor as result\n            if (typeof result !== 'undefined') return result;\n        };\n\n\n\n\n        // set constructor prototype\n        classConstructor.prototype = Object.create(classDefinition.inherits ? (classDefinition.inherits.prototype ? classDefinition.inherits.prototype : classDefinition.inherits) : {}, properties);\n\n        // identify as ee class using the init function as its contructor\n        Object.defineProperty(classConstructor.prototype, '___isEeClass', {value:true});\n\n        return classConstructor;\n    };\n\n\n\n\n    // set enumerable property\n    Class.Enumerable = function() {\n        Object.defineProperty(this, 'enumerable', {value: true, enumerable: true});\n        return this;\n    };\n\n    // set configurable property\n    Class.Configurable = function() {\n        Object.defineProperty(this, 'configurable', {value: true, enumerable: true});\n        return this;\n    };\n\n    // set writable property\n    Class.Writable = function() {\n        Object.defineProperty(this, 'writable', {value: true, enumerable: true});\n        return this;\n    };\n\n    // return the class prototype\n    Class.proto = function(instance) {\n        return typeof instance === 'object' ? Object.getPrototypeOf(instance) : undefined;\n    };\n\n    // return all enumerable key of the class an its prototypes\n    Class.keys = function(instance) {\n        var keys = [];\n        for (var key in instance) keys.push(key);\n        return keys;\n    };\n\n    // define a proeprty on an objetc\n    Class.define = function(instance, property, descriptor){\n        Object.defineProperty(instance, property, descriptor);\n    };\n\n    // implement a class on an object\n    Class.implement = function(source, target) {\n        Class.keys(source).forEach(function(key){\n            target[key] = source[key];\n        });\n\n        return target;\n    };\n\n    // list all methods of a class\n    Class.inspect = function(obj, description) {\n        description = description || {};\n\n        Object.getOwnPropertyNames(obj).sort().forEach(function(name) {\n            if (typeof obj[name] === 'function') {\n                description[name] = function(){};\n            }\n            else if (name !== '___isEeClass') {\n                description[name] = obj[name];\n            }\n        });\n\n        if (Object.getPrototypeOf(obj)) {\n            description.super = {};\n            Class.inspect(Object.getPrototypeOf(obj), description.super);\n        }\n\n        return description;\n    };\n\n\n    return Class;\n});\n"],"sourceRoot":"/source/"}